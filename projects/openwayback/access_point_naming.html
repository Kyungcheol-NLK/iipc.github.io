<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Wayback - Access Point Naming</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="Brad Tofel" />
          </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://archive-access.sourceforge.net/projects/wayback/" id="bannerLeft">
    
                                            <img src="../../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback" alt="" />
    
            </a>
                          <span id="bannerRight">
    
            Wayback
    
            </span>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2013-12-12
                      </div>
            <div class="xright">            <a href="http://www.sourceforge.net" class="externalLink">Sourceforge</a>
            |
                <a href="http://crawler.archive.org" class="externalLink">Heritrix</a>
            |
                <a href="http://archive-access.sourceforge.net/projects/nutchwax/" class="externalLink">NutchWAX</a>
            |
                <a href="http://archive-access.sourceforge.net" class="externalLink">Archive Access</a>
            |
                <a href="http://www.archive.org" class="externalLink">Internet Archive</a>
            |
                <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">Home</a>
            
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">Requirements</a>
          </li>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">Administrator Manual</a>
          </li>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">URL Prefixes and AccessPoint names</a>
          </li>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">Hadoop CDX Generation</a>
          </li>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">Release Notes</a>
          </li>
              
    <li class="none">
                    <a href="../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">FAQ</a>
          </li>
              
    <li class="none">
                    <a href="../../Users/andy/Documents/workspace-iipc/openwayback/../../projects/openwayback">API</a>
          </li>
              
    <li class="none">
                    <a href="https://webarchive.jira.com/browse/ACC/component/10031" class="externalLink">Browse/Submit a Bug</a>
          </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <revision></revision><div class="section"><h2><a name="Overview"></a>Overview</h2>
<p>
      Tomcat (or other servlet containers) are configured to listen on one or 
      more ports, so each request received on one of those ports is targeted
      to a particular webapp based on the name of the .war file deployed under
      the <b>webapps/</b> directory. The targeted webapp is determined based on
      the first directory in incoming requests.
      </p>
<p>
        If there are two webapps deployed under the <b>webapps/</b> directory,
        called <b>webappA.war</b> and <b>webappB.war</b>, then an incoming
        request <b>/webappA/file1</b> will be received by the webapp inside
        <b>webappA.war</b> as the request <b>/file1</b>. An incoming request
        for <b>webappB/images/foo.gif</b> will be received by the webapp inside
        <b>webappB.war</b> as <b>/images/foo.gif</b>.
      </p>
<p>
        Tomcat (and other servlet containers) allow a special .war file to be
        deployed under the <b>webapps/</b> directory called <b>ROOT.war</b>
        which will receive requests not matching another webapp. If the above 
        example also included a webapp deployed under the <b>webapps/</b> 
        directory named <b>ROOT.war</b>, then requests starting with <b>webappA/</b>
        will be received by <b>webappA.war</b>, requests starting with <b>webappB/</b>
        will be received by <b>webappB.war</b>, and all other requests will be
        receieved by the <b>ROOT.war</b> webapp.
      </p>
<p>
        If possible, deploying your webapp as <b>ROOT.war</b> will result in
        somewhat cleaner public URLs, but this is not a requirement. The
        examples below all include alternate URL configuration prefixes depending
        on whether you deploy the Wayback .war file as either <b>ROOT.war</b> or
        <b>wayback.war</b>.
      </p>
<div class="section"><h3><a name="AccessPoint_Names"></a>AccessPoint Names</h3>
<p>
          Each AccessPoint Spring XML bean definition must include a <b>name</b>
          property:
          <br />
</br><code>

&lt;bean name=&quot;8080:wayback&quot; class=&quot;org.archive.wayback.webapp.AccessPoint&quot;&gt;
   ...
&lt;/bean&gt;

          </code><br />
</br>
          The <b>name</b> property indicates how requests <b>that are received
          by the Wayback webapp</b> are routed to the appropriate AccessPoint.
          Wayback allows targeting AccessPoints based on:
          <ul><li>hostname</li>
<li>port</li>
<li>first path <b>after</b> the optional webapp deployment name
            (which is empty if you deploy your Wayback webapp as
            <b>ROOT.war</b>)</li>
</ul>

          using the AccessPoint bean <b>name</b> field composed of <b>hostname</b>:<b>port</b>:<b>first_path</b>.
        </p>
<p>
          If you have configured DNS to resolve multiple hostnames to the same
          computer, you can use the <b>hostname:</b> to control AccessPoint
          resolving based on virtual hosts.
        </p>
<p>
          Port is the only required configuration component within the 
          AccessPoint <b>name</b> configuration. If you have multiple Tomcat
          <b>Connector</b>s you can alter this AccessPoint name configuration to
          target specific AccessPoints, otherwise, all your AccessPoint names 
          will have the same port, likely one of 8080, or 80.
        </p>
<p>
          A more commonly useful AccessPoint name resolving component is the 
          <b>first-path</b>, which allows you to easily expose multiple
          collections within a single Wayback webapp deployment, without varying
          hostnames, or ports (which often require network or system 
          administrator assistance).
        </p>
</div>
<div class="section"><h3><a name="Example_AccessPoint_names_and_URLs"></a>Example AccessPoint names and URLs</h3>
<p>
          The following table shows how urls will map to particular AccessPoints
          assuming you have deployed the Wayback webapp as <b>ROOT.war</b>, on
          a host with the name &quot;access.example.org&quot;, using port 8080.
          <table class="bodyTable"><tr class="a"><th>Access Point bean name</th>
<th>Archival URL prefix</th>
<th>Archival URL query example for <b>http://archive.org</b></th>
</tr>
<tr class="b"><td>8080:collectionA</td>
<td>http://access.example.org:8080/collectionA/</td>
<td>http://access.example.org:8080/collectionA/*/http://archive.org/</td>
</tr>
<tr class="a"><td>8080:collectionB</td>
<td>http://access.example.org:8080/collectionB/</td>
<td>http://access.example.org:8080/collectionB/*/http://archive.org/</td>
</tr>
</table>
</p>
<p>
          If you deployed your Wayback webapp with the name <b>wayback.war</b>
          the following table shows how urls will map to particular
          AccessPoints, on a host with the name &quot;access.example.org&quot;, using port
          8080.
          <table class="bodyTable"><tr class="b"><th>Access Point bean name</th>
<th>Archival URL prefix</th>
<th>Archival URL query example for <b>http://archive.org</b></th>
</tr>
<tr class="a"><td>8080:collectionA</td>
<td>http://access.example.org:8080/wayback/collectionA/</td>
<td>http://access.example.org:8080/wayback/collectionA/*/http://archive.org/</td>
</tr>
<tr class="b"><td>8080:collectionB</td>
<td>http://access.example.org:8080/wayback/collectionB/</td>
<td>http://access.example.org:8080/wayback/collectionB/*/http://archive.org/</td>
</tr>
</table>
</p>
<p>
          If you have configured multiple <b>Connector</b>s for your Tomcat
          server, listening on both port <b>80</b>, and port <b>8080</b>, and
          you deploy <b>ROOT.war</b> you can target different AccessPoints by
          port, as shown below. These examples assume your servers hostname is
          still &quot;access.example.org&quot;.
          <table class="bodyTable"><tr class="a"><th>Access Point bean name</th>
<th>Archival URL prefix</th>
<th>Archival URL query example for <b>http://archive.org</b></th>
</tr>
<tr class="b"><td>80:collectionA</td>
<td>http://access.example.org/collectionA/</td>
<td>http://access.example.org/collectionA/*/http://archive.org/</td>
</tr>
<tr class="a"><td>8080:collectionB</td>
<td>http://access.example.org:8080/collectionB/</td>
<td>http://access.example.org:8080/collectionB/*/http://archive.org/</td>
</tr>
<tr class="b"><td>80:collectionC</td>
<td>http://access.example.org/collectionC/</td>
<td>http://access.example.org/collectionC/*/http://archive.org/</td>
</tr>
</table>
</p>
<p>
          If you have a very limited number of AccessPoints to expose, you can
          do away with the <b>first-path</b> component, to achieve potentially
          very uncluttered Archival URLs. Assuming multiple <b>Connector</b>s
          for your Tomcat server, listening on both port <b>80</b>, and port
          <b>8080</b>, and you deploy <b>ROOT.war</b> you can target different
          AccessPoints by port alone, as shown below. These examples still
          assume your servers hostname is &quot;access.example.org&quot;.
          <table class="bodyTable"><tr class="a"><th>Access Point bean name</th>
<th>Archival URL prefix</th>
<th>Archival URL query example for <b>http://archive.org</b></th>
</tr>
<tr class="b"><td>80</td>
<td>http://access.example.org/</td>
<td>http://access.example.org/*/http://archive.org/</td>
</tr>
<tr class="a"><td>8080</td>
<td>http://access.example.org:8080/</td>
<td>http://access.example.org:8080/*/http://archive.org/</td>
</tr>
</table>
</p>
<p>
          Getting somewhat fancy, you can use virtual hosts, doing away with 
          non-standard ports, and use hostnames alone to specify AccessPoints.
          This means getting your Tomcat to listen on port <b>80</b>, and
          deploying the webapp as <b>ROOT.war</b>. You'd have to configure your
          DNS so both &quot;collection1.example.org&quot; and &quot;collection2.example.org&quot;
          point to the host running Wayback:
          <table class="bodyTable"><tr class="b"><th>Access Point bean name</th>
<th>Archival URL prefix</th>
<th>Archival URL query example for <b>http://archive.org</b></th>
</tr>
<tr class="a"><td>collection1.example.org:80</td>
<td>http://collection1.example.org/</td>
<td>http://collection1.example.org/*/http://archive.org/</td>
</tr>
<tr class="b"><td>collection2.example.org:80</td>
<td>http://collection2.example.org/</td>
<td>http://collection2.example.org/*/http://archive.org/</td>
</tr>
</table>
</p>
</div>
<div class="section"><h3><a name="Getting_really_fancy"></a>Getting really fancy</h3>
<p>
          Assuming you've deployed your webapp as <b>ROOT.war</b> and have Tomcat
          listening on both port 80 and 8080, with the hostnames 
          &quot;collection1.example.org&quot; and &quot;collection2.example.org&quot; both
          pointing to the host running wayback:
          <table class="bodyTable"><tr class="a"><th>Access Point bean name</th>
<th>Archival URL prefix</th>
<th>Archival URL query example for <b>http://archive.org</b></th>
</tr>
<tr class="b"><td>collection1.example.org:80</td>
<td>http://collection1.example.org/</td>
<td>http://collection1.example.org/*/http://archive.org/</td>
</tr>
<tr class="a"><td>collection1.example.org:8080:subset1</td>
<td>http://collection1.example.org:8080/subset1/</td>
<td>http://collection1.example.org:8080/subset1/*/http://archive.org/</td>
</tr>
<tr class="b"><td>collection1.example.org:8080:subset2</td>
<td>http://collection1.example.org:8080/subset2/</td>
<td>http://collection1.example.org:8080/subset2/*/http://archive.org/</td>
</tr>
<tr class="a"><td>collection2.example.org:8080</td>
<td>http://collection1.example.org:8080/</td>
<td>http://collection1.example.org:8080/*/http://archive.org/</td>
</tr>
<tr class="b"><td>collection2.example.org:80:internal</td>
<td>http://collection2.example.org/internal/</td>
<td>http://collection2.example.org/internal/*/http://archive.org/</td>
</tr>
<tr class="a"><td>collection2.example.org:80:public</td>
<td>http://collection2.example.org/public/</td>
<td>http://collection2.example.org/public/*/http://archive.org/</td>
</tr>
</table>
</p>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2005-2013
    
          IIPC
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
